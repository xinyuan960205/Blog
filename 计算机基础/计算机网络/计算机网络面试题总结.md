# 计算机网络体系结构

- OSI七层模型与TCP/IP 五层模型,

  OSI：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

  五层：应用层、传输层、网络层、数据链路层、物理层

  应用层：任务是通过应用进程间的交互来完成特定网络应用。我们把应用层交互的数据单元称为**报文**。(典型设备:应用程序，如FTP，SMTP ，HTTP)

  传输层：提供端对端的接口  (典型设备:  进程和端口)    数据单元：**数据段 （Segment）** 

  网络层：任务就是选择合适的网间路由和交换结点， 确保数据及时传送。(典型设备:路由器，防火墙、多层交换机) 数据单元：**数据包（Packet ）** 

  数据链路层：传输有地址的帧以及错误检测功能 (典型设备:  网卡，网桥，交换机) 数据单元：**帧 （Frame）**

  物理层：以二进制数据的形式在物理媒体上传输数据  (典型设备：中继器，集线器、网线、HUB)   数据单元：**比特 （Bit）**



- 常见应用层协议和运输层、网络层协议说一下，以及硬件如路由器之类在哪一层

  应用层：DHCP动态主机配置协议、FTP文件传输协议、HTTP超文本传输协议、SMTP简单邮件传输协议、RPC远程过程调用协议

  运输层：TCP、UDP

  网络层：ICMP互联网控制信息协议、ICMPv6互联网控制信息协议v6版本、ipv4/v6互联网协议、ARP地址解析协议

  

- 从输入 URL 到页面加载完成，中间发生了什么（基本必问的问题了，因为这个问题能考察对计算机网络整体的掌握程度，以及方便面试官扩展问题）；

  总体来说分为以下几个过程:

  1. DNS解析
  2. TCP连接
  3. 发送HTTP请求
  4. 服务器处理请求并返回HTTP报文
  5. 浏览器解析渲染页面
  6. 连接结束

  

    (1) 浏览器获取输入的域名www.baidu.com 

    (2) 浏览器向DNS请求解析www.baidu.com的IP地址 

    (3) 域名系统DNS解析出百度服务器的IP地址 

    (4) 浏览器与该服务器建立TCP连接(默认端口号80) 

    (5) 浏览器发出HTTP请求，请求百度首页 

    (6) 服务器通过HTTP响应把首页文件发送给浏览器 

    (8) 浏览器将首页文件进行解析，并将Web页显示给用户。 

    (7) TCP连接释放   HTTP是长连接，不会立马释放的，应该会等keepAlive时间过了才会释放掉TCP连接

  **涉及到的协议**    

    (1) 应用层：HTTP(WWW访问协议)，DNS(域名解析服务) 

    (2) 传输层：TCP(为HTTP提供可靠的数据传输)，UDP(DNS使用UDP传输) 

    (3) 网络层：IP(IP数据数据包传输和路由选择)，ICMP(提供网络传输过程中的差错检测)，ARP(将本机的默认网关IP地址映射成物理MAC地址)

  **推荐博文**

  https://www.cnblogs.com/rollenholt/archive/2012/03/23/2414345.html

  

- 多进程多线程浏览器（比如 Chrome），主控进程，插件进程，GPU进程，每个 tab 一个进程，tab 进程内有网络请求线程等；



- 单拎出来的跨域问题，了解下浏览器同源（协议，域名，端口）政策，对后端的限制（AJAX等，前端问题暂不考虑），解决方法（JSONP，WebSocket，CORS），CORS（Cross-Origin Resource Sharing）相关内容，头字段 Origin，Access-Control-Allow-Origin 等；



- SOCKS（了解下这是干啥的，以及基本流程）；



传输层（端到端通信服务，多路分解与多路复用，端口号的作用，套接字）；



- 

# TCP和UDP

TCP与UDP区别和应用场景，基于TCP的协议有哪些，基于UDP的有哪些



基本特点，报文头大小与具体结构，序号seq/确认号ack作用，控制位及各自含义，可选头的时间戳（简单了解）；



TCP 连接能否感知对方是否在线（规范不能，实际可以），TCP 保活机制（SO_KEEPALIVE），保活参数（保活定时，失活前检查参数等），应用层面保活（心跳包，ping/pong 包等））；



可靠传输，结合序号/确认号说明，停止并等待 ARQ，结合流水线/滑动窗口的连续 ARQ，超时重传机制，RTT，RTO，差错恢复机制，GBN，SR，快速重传（冗余 ARK）等；



拥塞控制，目的（避免网络拥塞），基本原理，慢启动，拥塞避免，快速回复，快速重传，AIMD（加法增大乘法减小），导致网络通讯波动（同时进入控制状态，时大时小），随机早期检测算法（了解一下）；



流量控制，目的（防止接收方缓存溢出导致分组丢失），基本原理，不足及改进（匹配相差一个 RTT，接单了解一下）；



TCP粘包现象原因和解决方法



TCP三次握手过程以及每次握手后的状态改变，为什么三次？为什么两次不行？如果你的答案是防止已失效的请求报文又传送到了服务端，建立了多余的链接，浪费资源，但这个答案被否定了，你还能给出什么答案？



TCP四次挥手过程以及状态改变，为什么四次？CLOSE-WAIT和TIME-WAIT存在的意义？如何查看TIME-WAIT状态的链接数量？为什么会TIME-WAIT过多？解决方法是怎样的？



UDP（可能作为对比来问，无连接，尽力而为，面向报文，无各种控制，一对一，一对多，多对多，首部大小及结构，校验和计算过程（求和，溢出回卷，反码，校验等），可能间插着问问正反补码）；



TCP，UDP 伪首部，虚拟的数据结构，参与计算校验和，简单了解；



# HTTP

基本描述



HTTP1.0、1.1、2.0之间的区别，不同版本的特点



HTTPS（基本描述，主要作用，和 HTTP 的区别，SSL/TLS 握手过程，为什么过程要这样设计，对称/非对称加密，公私钥，证书，签名，CA，浏览器校验，加密算法（这个我并不懂）等）；



HTTP请求有哪些，多说点。Post和get区别。



请求响应报文结构



常用的请求头字段



HTTP常见响应状态码，从1xx到5xx都要说。如304,301,302，504，



RFC规范（知道就行）



重定向和转发区别



单拎出来的 cookie 和 session 问题，搞清楚它们是干啥的，相关的头字段，其中 session 可能扩展到分布式上；



单拎出来的缓存问题，结合状态码 304 可能问到，相关头字段，If-Modified-Since 和 Last-Modified，If-None-Match 和 ETag，它们的区别等；





# 网络层

- IP （感觉其实传输层以下问的不多，能说出来就行了。v4/v6，点分十进制，NAT，DHCP，EGP（BGP 看一下留个印象），IGP（RIP，OSPF 留个印象））；



- IP地址的分类

  A类地址：以0开头，  第一个字节范围：1~126（1.0.0.0 - 126.255.255.255）；

  B类地址：以10开头，  第一个字节范围：128~191（128.0.0.0 - 191.255.255.255）；

  C类地址：以110开头， 第一个字节范围：192~223（192.0.0.0 - 223.255.255.255）；

  D类地址：以1110开头，第一个字节范围：224~239（224.0.0.0 - 239.255.255.255）；（作为多播使用）

  E类地址：保留

  

  其中A、B、C是基本类，D、E类作为多播和保留使用。

  以下是留用的内部私有地址：

  A类 10.0.0.0--10.255.255.255

  B类 172.16.0.0--172.31.255.255

  C类 192.168.0.0--192.168.255.255

  

  IP地址与子网掩码相与得到网络号：

  ip    : 192.168.2.110

  &

  Submask : 255.255.255.0

  \----------------------------

  网络号  ：192.168.2  .0

  

  注:

  主机号，全为0的是网络号（例如：192.168.2.0），主机号全为1的为广播地址（192.168.2.255）



- DNS（基本概念，流程，缓存，hosts 文件，DNS服务器层级，迭代/递归查询等）；

  传输：UDP或TCP，两种情况使用TCP



- ICMP（知道类型 0 和类型 8 报文是啥（Echo 响应与请求），ping 的流程）；

  - 两个目的：

  - ping

  - Traceroute

  具体内容参考网络层文章

- ARP（地址解析协议，了解一下流程什么的）；

  ARP的作用：网络层目标主机用的是IP这个虚拟地址，到了数据链路层需要知道具体的mac地址，就需要ARP转换一下。流程就是查表找不到了怎么办。

  流程参考网络层文章

- MAC（介质访问控制协议，简单了解一下）；

  查了一下，感觉了解这个具体协议是通信该干的。所以我觉得只要知道MAC用于唯一标识网络适配器（网卡）就可以了。一个网卡就自己带有一个mac地址。



